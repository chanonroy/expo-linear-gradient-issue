94647c4b3360c171c09bc3fff3157ea3
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var Platform = require("../Utilities/Platform");

var deepDiffer = require("../Utilities/differ/deepDiffer");

var React = require('react');

var View = require("../Components/View/View");

var VirtualizedList = require("./VirtualizedList");

var StyleSheet = require("../StyleSheet/StyleSheet");

var invariant = require('invariant');

var defaultProps = _objectSpread(_objectSpread({}, VirtualizedList.defaultProps), {}, {
  numColumns: 1,
  removeClippedSubviews: Platform.OS === 'android'
});

var FlatList = function (_React$PureComponent) {
  (0, _inherits2.default)(FlatList, _React$PureComponent);

  var _super = _createSuper(FlatList);

  (0, _createClass2.default)(FlatList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      if (this._listRef) {
        this._listRef.scrollToEnd(params);
      }
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      if (this._listRef) {
        this._listRef.scrollToIndex(params);
      }
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      if (this._listRef) {
        this._listRef.scrollToItem(params);
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      if (this._listRef) {
        this._listRef.scrollToOffset(params);
      }
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      if (this._listRef) {
        this._listRef.recordInteraction();
      }
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      if (this._listRef) {
        this._listRef.flashScrollIndicators();
      }
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._listRef) {
        return this._listRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._listRef) {
        return this._listRef.getScrollableNode();
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._listRef) {
        this._listRef.setNativeProps(props);
      }
    }
  }]);

  function FlatList(_props) {
    var _this;

    (0, _classCallCheck2.default)(this, FlatList);
    _this = _super.call(this, _props);
    _this._virtualizedListPairs = [];

    _this._captureRef = function (ref) {
      _this._listRef = ref;
    };

    _this._getItem = function (data, index) {
      var numColumns = _this.props.numColumns;

      if (numColumns > 1) {
        var ret = [];

        for (var kk = 0; kk < numColumns; kk++) {
          var _item = data[index * numColumns + kk];

          if (_item != null) {
            ret.push(_item);
          }
        }

        return ret;
      } else {
        return data[index];
      }
    };

    _this._getItemCount = function (data) {
      return data ? Math.ceil(data.length / _this.props.numColumns) : 0;
    };

    _this._keyExtractor = function (items, index) {
      var _this$props = _this.props,
          keyExtractor = _this$props.keyExtractor,
          numColumns = _this$props.numColumns;

      if (numColumns > 1) {
        invariant(Array.isArray(items), 'FlatList: Encountered internal consistency error, expected each item to consist of an ' + 'array with 1-%s columns; instead, received a single item.', numColumns);
        return items.map(function (it, kk) {
          return keyExtractor(it, index * numColumns + kk);
        }).join(':');
      } else {
        return keyExtractor(items, index);
      }
    };

    _this._renderer = function () {
      var _this$props2 = _this.props,
          ListItemComponent = _this$props2.ListItemComponent,
          renderItem = _this$props2.renderItem,
          numColumns = _this$props2.numColumns,
          columnWrapperStyle = _this$props2.columnWrapperStyle;
      var virtualizedListRenderKey = ListItemComponent ? 'ListItemComponent' : 'renderItem';

      var renderer = function renderer(props) {
        if (ListItemComponent) {
          return React.createElement(ListItemComponent, props);
        } else if (renderItem) {
          return renderItem(props);
        } else {
          return null;
        }
      };

      return (0, _defineProperty2.default)({}, virtualizedListRenderKey, function (info) {
        if (numColumns > 1) {
          var _item2 = info.item,
              _index = info.index;
          invariant(Array.isArray(_item2), 'Expected array of items with numColumns > 1');
          return React.createElement(View, {
            style: StyleSheet.compose(styles.row, columnWrapperStyle)
          }, _item2.map(function (it, kk) {
            var element = renderer({
              item: it,
              index: _index * numColumns + kk,
              separators: info.separators
            });
            return element != null ? React.createElement(React.Fragment, {
              key: kk
            }, element) : null;
          }));
        } else {
          return renderer(info);
        }
      });
    };

    _this._checkProps(_this.props);

    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._virtualizedListPairs = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityConfig: pair.viewabilityConfig,
          onViewableItemsChanged: _this._createOnViewableItemsChanged(pair.onViewableItemsChanged)
        };
      });
    } else if (_this.props.onViewableItemsChanged) {
      _this._virtualizedListPairs.push({
        viewabilityConfig: _this.props.viewabilityConfig,
        onViewableItemsChanged: _this._createOnViewableItemsChanged(_this.props.onViewableItemsChanged)
      });
    }

    return _this;
  }

  (0, _createClass2.default)(FlatList, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      invariant(prevProps.numColumns === this.props.numColumns, 'Changing numColumns on the fly is not supported. Change the key prop on FlatList when ' + 'changing the number of columns to force a fresh render of the component.');
      invariant(prevProps.onViewableItemsChanged === this.props.onViewableItemsChanged, 'Changing onViewableItemsChanged on the fly is not supported');
      invariant(!deepDiffer(prevProps.viewabilityConfig, this.props.viewabilityConfig), 'Changing viewabilityConfig on the fly is not supported');
      invariant(prevProps.viewabilityConfigCallbackPairs === this.props.viewabilityConfigCallbackPairs, 'Changing viewabilityConfigCallbackPairs on the fly is not supported');

      this._checkProps(this.props);
    }
  }, {
    key: "_checkProps",
    value: function _checkProps(props) {
      var getItem = props.getItem,
          getItemCount = props.getItemCount,
          horizontal = props.horizontal,
          numColumns = props.numColumns,
          columnWrapperStyle = props.columnWrapperStyle,
          onViewableItemsChanged = props.onViewableItemsChanged,
          viewabilityConfigCallbackPairs = props.viewabilityConfigCallbackPairs;
      invariant(!getItem && !getItemCount, 'FlatList does not support custom data formats.');

      if (numColumns > 1) {
        invariant(!horizontal, 'numColumns does not support horizontal.');
      } else {
        invariant(!columnWrapperStyle, 'columnWrapperStyle not supported for single column lists');
      }

      invariant(!(onViewableItemsChanged && viewabilityConfigCallbackPairs), 'FlatList does not support setting both onViewableItemsChanged and ' + 'viewabilityConfigCallbackPairs.');
    }
  }, {
    key: "_pushMultiColumnViewable",
    value: function _pushMultiColumnViewable(arr, v) {
      var _this$props3 = this.props,
          numColumns = _this$props3.numColumns,
          keyExtractor = _this$props3.keyExtractor;
      v.item.forEach(function (item, ii) {
        invariant(v.index != null, 'Missing index!');
        var index = v.index * numColumns + ii;
        arr.push(_objectSpread(_objectSpread({}, v), {}, {
          item: item,
          key: keyExtractor(item, index),
          index: index
        }));
      });
    }
  }, {
    key: "_createOnViewableItemsChanged",
    value: function _createOnViewableItemsChanged(onViewableItemsChanged) {
      var _this2 = this;

      return function (info) {
        var numColumns = _this2.props.numColumns;

        if (onViewableItemsChanged) {
          if (numColumns > 1) {
            var changed = [];
            var viewableItems = [];
            info.viewableItems.forEach(function (v) {
              return _this2._pushMultiColumnViewable(viewableItems, v);
            });
            info.changed.forEach(function (v) {
              return _this2._pushMultiColumnViewable(changed, v);
            });
            onViewableItemsChanged({
              viewableItems: viewableItems,
              changed: changed
            });
          } else {
            onViewableItemsChanged(info);
          }
        }
      };
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(VirtualizedList, (0, _extends2.default)({}, this.props, {
        getItem: this._getItem,
        getItemCount: this._getItemCount,
        keyExtractor: this._keyExtractor,
        ref: this._captureRef,
        viewabilityConfigCallbackPairs: this._virtualizedListPairs
      }, this._renderer()));
    }
  }]);
  return FlatList;
}(React.PureComponent);

FlatList.defaultProps = defaultProps;
var styles = StyleSheet.create({
  row: {
    flexDirection: 'row'
  }
});
module.exports = FlatList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZsYXRMaXN0LmpzIl0sIm5hbWVzIjpbIlBsYXRmb3JtIiwicmVxdWlyZSIsImRlZXBEaWZmZXIiLCJSZWFjdCIsIlZpZXciLCJWaXJ0dWFsaXplZExpc3QiLCJTdHlsZVNoZWV0IiwiaW52YXJpYW50IiwiZGVmYXVsdFByb3BzIiwibnVtQ29sdW1ucyIsInJlbW92ZUNsaXBwZWRTdWJ2aWV3cyIsIk9TIiwiRmxhdExpc3QiLCJwYXJhbXMiLCJfbGlzdFJlZiIsInNjcm9sbFRvRW5kIiwic2Nyb2xsVG9JbmRleCIsInNjcm9sbFRvSXRlbSIsInNjcm9sbFRvT2Zmc2V0IiwicmVjb3JkSW50ZXJhY3Rpb24iLCJmbGFzaFNjcm9sbEluZGljYXRvcnMiLCJnZXRTY3JvbGxSZXNwb25kZXIiLCJnZXRTY3JvbGxhYmxlTm9kZSIsInByb3BzIiwic2V0TmF0aXZlUHJvcHMiLCJfdmlydHVhbGl6ZWRMaXN0UGFpcnMiLCJfY2FwdHVyZVJlZiIsInJlZiIsIl9nZXRJdGVtIiwiZGF0YSIsImluZGV4IiwicmV0Iiwia2siLCJpdGVtIiwicHVzaCIsIl9nZXRJdGVtQ291bnQiLCJNYXRoIiwiY2VpbCIsImxlbmd0aCIsIl9rZXlFeHRyYWN0b3IiLCJpdGVtcyIsImtleUV4dHJhY3RvciIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIml0Iiwiam9pbiIsIl9yZW5kZXJlciIsIkxpc3RJdGVtQ29tcG9uZW50IiwicmVuZGVySXRlbSIsImNvbHVtbldyYXBwZXJTdHlsZSIsInZpcnR1YWxpemVkTGlzdFJlbmRlcktleSIsInJlbmRlcmVyIiwiaW5mbyIsImNvbXBvc2UiLCJzdHlsZXMiLCJyb3ciLCJlbGVtZW50Iiwic2VwYXJhdG9ycyIsIl9jaGVja1Byb3BzIiwidmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIiwicGFpciIsInZpZXdhYmlsaXR5Q29uZmlnIiwib25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCIsIl9jcmVhdGVPblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwicHJldlByb3BzIiwiZ2V0SXRlbSIsImdldEl0ZW1Db3VudCIsImhvcml6b250YWwiLCJhcnIiLCJ2IiwiZm9yRWFjaCIsImlpIiwia2V5IiwiY2hhbmdlZCIsInZpZXdhYmxlSXRlbXMiLCJfcHVzaE11bHRpQ29sdW1uVmlld2FibGUiLCJQdXJlQ29tcG9uZW50IiwiY3JlYXRlIiwiZmxleERpcmVjdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLFFBQVEsR0FBR0MsT0FBTyx5QkFBeEI7O0FBQ0EsSUFBTUMsVUFBVSxHQUFHRCxPQUFPLGtDQUExQjs7QUFDQSxJQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLElBQU1HLElBQUksR0FBR0gsT0FBTywyQkFBcEI7O0FBQ0EsSUFBTUksZUFBZSxHQUFHSixPQUFPLHFCQUEvQjs7QUFDQSxJQUFNSyxVQUFVLEdBQUdMLE9BQU8sNEJBQTFCOztBQUVBLElBQU1NLFNBQVMsR0FBR04sT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBOE5BLElBQU1PLFlBQVksbUNBQ2JILGVBQWUsQ0FBQ0csWUFESDtBQUVoQkMsRUFBQUEsVUFBVSxFQUFFLENBRkk7QUFRaEJDLEVBQUFBLHFCQUFxQixFQUFFVixRQUFRLENBQUNXLEVBQVQsS0FBZ0I7QUFSdkIsRUFBbEI7O0lBd0hNQyxROzs7Ozs7O2dDQU1RQyxNLEVBQWlDO0FBQzNDLFVBQUksS0FBS0MsUUFBVCxFQUFtQjtBQUNqQixhQUFLQSxRQUFMLENBQWNDLFdBQWQsQ0FBMEJGLE1BQTFCO0FBQ0Q7QUFDRjs7O2tDQVVhQSxNLEVBS1g7QUFDRCxVQUFJLEtBQUtDLFFBQVQsRUFBbUI7QUFDakIsYUFBS0EsUUFBTCxDQUFjRSxhQUFkLENBQTRCSCxNQUE1QjtBQUNEO0FBQ0Y7OztpQ0FRWUEsTSxFQUlWO0FBQ0QsVUFBSSxLQUFLQyxRQUFULEVBQW1CO0FBQ2pCLGFBQUtBLFFBQUwsQ0FBY0csWUFB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QUU7QUFBaEI7QUFEMEIsQ0FBbEIsQ0FBZjtBQUlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJyRSxRQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgZGVlcERpZmZlciA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9kaWZmZXIvZGVlcERpZmZlcicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3Jyk7XG5jb25zdCBWaXJ0dWFsaXplZExpc3QgPSByZXF1aXJlKCcuL1ZpcnR1YWxpemVkTGlzdCcpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxuaW1wb3J0IHR5cGUge1ZpZXdTdHlsZVByb3B9IGZyb20gJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7XG4gIFZpZXdhYmlsaXR5Q29uZmlnLFxuICBWaWV3VG9rZW4sXG4gIFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyLFxufSBmcm9tICcuL1ZpZXdhYmlsaXR5SGVscGVyJztcbmltcG9ydCB0eXBlIHtcbiAgUHJvcHMgYXMgVmlydHVhbGl6ZWRMaXN0UHJvcHMsXG4gIFJlbmRlckl0ZW1UeXBlLFxuICBSZW5kZXJJdGVtUHJvcHMsXG59IGZyb20gJy4vVmlydHVhbGl6ZWRMaXN0JztcblxudHlwZSBSZXF1aXJlZFByb3BzPEl0ZW1UPiA9IHtcbiAgLyoqXG4gICAqIEZvciBzaW1wbGljaXR5LCBkYXRhIGlzIGp1c3QgYSBwbGFpbiBhcnJheS4gSWYgeW91IHdhbnQgdG8gdXNlIHNvbWV0aGluZyBlbHNlLCBsaWtlIGFuXG4gICAqIGltbXV0YWJsZSBsaXN0LCB1c2UgdGhlIHVuZGVybHlpbmcgYFZpcnR1YWxpemVkTGlzdGAgZGlyZWN0bHkuXG4gICAqL1xuICBkYXRhOiA/JFJlYWRPbmx5QXJyYXk8SXRlbVQ+LFxufTtcbnR5cGUgT3B0aW9uYWxQcm9wczxJdGVtVD4gPSB7XG4gIC8qKlxuICAgKiBUYWtlcyBhbiBpdGVtIGZyb20gYGRhdGFgIGFuZCByZW5kZXJzIGl0IGludG8gdGhlIGxpc3QuIEV4YW1wbGUgdXNhZ2U6XG4gICAqXG4gICAqICAgICA8RmxhdExpc3RcbiAgICogICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudD17UGxhdGZvcm0uT1MgIT09ICdhbmRyb2lkJyAmJiAoe2hpZ2hsaWdodGVkfSkgPT4gKFxuICAgKiAgICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGUuc2VwYXJhdG9yLCBoaWdobGlnaHRlZCAmJiB7bWFyZ2luTGVmdDogMH1dfSAvPlxuICAgKiAgICAgICApfVxuICAgKiAgICAgICBkYXRhPXtbe3RpdGxlOiAnVGl0bGUgVGV4dCcsIGtleTogJ2l0ZW0xJ31dfVxuICAgKiAgICAgICByZW5kZXJJdGVtPXsoe2l0ZW0sIHNlcGFyYXRvcnN9KSA9PiAoXG4gICAqICAgICAgICAgPFRvdWNoYWJsZUhpZ2hsaWdodFxuICAgKiAgICAgICAgICAgb25QcmVzcz17KCkgPT4gdGhpcy5fb25QcmVzcyhpdGVtKX1cbiAgICogICAgICAgICAgIG9uU2hvd1VuZGVybGF5PXtzZXBhcmF0b3JzLmhpZ2hsaWdodH1cbiAgICogICAgICAgICAgIG9uSGlkZVVuZGVybGF5PXtzZXBhcmF0b3JzLnVuaGlnaGxpZ2h0fT5cbiAgICogICAgICAgICAgIDxWaWV3IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiAnd2hpdGUnfX0+XG4gICAqICAgICAgICAgICAgIDxUZXh0PntpdGVtLnRpdGxlfTwvVGV4dD5cbiAgICogICAgICAgICAgIDwvVmlldz5cbiAgICogICAgICAgICA8L1RvdWNoYWJsZUhpZ2hsaWdodD5cbiAgICogICAgICAgKX1cbiAgICogICAgIC8+XG4gICAqXG4gICAqIFByb3ZpZGVzIGFkZGl0aW9uYWwgbWV0YWRhdGEgbGlrZSBgaW5kZXhgIGlmIHlvdSBuZWVkIGl0LCBhcyB3ZWxsIGFzIGEgbW9yZSBnZW5lcmljXG4gICAqIGBzZXBhcmF0b3JzLnVwZGF0ZVByb3BzYCBmdW5jdGlvbiB3aGljaCBsZXQncyB5b3Ugc2V0IHdoYXRldmVyIHByb3BzIHlvdSB3YW50IHRvIGNoYW5nZSB0aGVcbiAgICogcmVuZGVyaW5nIG9mIGVpdGhlciB0aGUgbGVhZGluZyBzZXBhcmF0b3Igb3IgdHJhaWxpbmcgc2VwYXJhdG9yIGluIGNhc2UgdGhlIG1vcmUgY29tbW9uXG4gICAqIGBoaWdobGlnaHRgIGFuZCBgdW5oaWdobGlnaHRgICh3aGljaCBzZXQgdGhlIGBoaWdobGlnaHRlZDogYm9vbGVhbmAgcHJvcCkgYXJlIGluc3VmZmljaWVudCBmb3JcbiAgICogeW91ciB1c2UtY2FzZS5cbiAgICovXG4gIHJlbmRlckl0ZW0/OiA/UmVuZGVySXRlbVR5cGU8SXRlbVQ+LFxuICAvKipcbiAgICogUmVuZGVyZWQgaW4gYmV0d2VlbiBlYWNoIGl0ZW0sIGJ1dCBub3QgYXQgdGhlIHRvcCBvciBib3R0b20uIEJ5IGRlZmF1bHQsIGBoaWdobGlnaHRlZGAgYW5kXG4gICAqIGBsZWFkaW5nSXRlbWAgcHJvcHMgYXJlIHByb3ZpZGVkLiBgcmVuZGVySXRlbWAgcHJvdmlkZXMgYHNlcGFyYXRvcnMuaGlnaGxpZ2h0YC9gdW5oaWdobGlnaHRgXG4gICAqIHdoaWNoIHdpbGwgdXBkYXRlIHRoZSBgaGlnaGxpZ2h0ZWRgIHByb3AsIGJ1dCB5b3UgY2FuIGFsc28gYWRkIGN1c3RvbSBwcm9wcyB3aXRoXG4gICAqIGBzZXBhcmF0b3JzLnVwZGF0ZVByb3BzYC5cbiAgICovXG4gIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICAvKipcbiAgICogVGFrZXMgYW4gaXRlbSBmcm9tIGBkYXRhYCBhbmQgcmVuZGVycyBpdCBpbnRvIHRoZSBsaXN0LiBFeGFtcGxlIHVzYWdlOlxuICAgKlxuICAgKiAgICAgPEZsYXRMaXN0XG4gICAqICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e1BsYXRmb3JtLk9TICE9PSAnYW5kcm9pZCcgJiYgKHtoaWdobGlnaHRlZH0pID0+IChcbiAgICogICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlLnNlcGFyYXRvciwgaGlnaGxpZ2h0ZWQgJiYge21hcmdpbkxlZnQ6IDB9XX0gLz5cbiAgICogICAgICAgKX1cbiAgICogICAgICAgZGF0YT17W3t0aXRsZTogJ1RpdGxlIFRleHQnLCBrZXk6ICdpdGVtMSd9XX1cbiAgICogICAgICAgTGlzdEl0ZW1Db21wb25lbnQ9eyh7aXRlbSwgc2VwYXJhdG9yc30pID0+IChcbiAgICogICAgICAgICA8VG91Y2hhYmxlSGlnaGxpZ2h0XG4gICAqICAgICAgICAgICBvblByZXNzPXsoKSA9PiB0aGlzLl9vblByZXNzKGl0ZW0pfVxuICAgKiAgICAgICAgICAgb25TaG93VW5kZXJsYXk9e3NlcGFyYXRvcnMuaGlnaGxpZ2h0fVxuICAgKiAgICAgICAgICAgb25IaWRlVW5kZXJsYXk9e3NlcGFyYXRvcnMudW5oaWdobGlnaHR9PlxuICAgKiAgICAgICAgICAgPFZpZXcgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSd9fT5cbiAgICogICAgICAgICAgICAgPFRleHQ+e2l0ZW0udGl0bGV9PC9UZXh0PlxuICAgKiAgICAgICAgICAgPC9WaWV3PlxuICAgKiAgICAgICAgIDwvVG91Y2hhYmxlSGlnaGxpZ2h0PlxuICAgKiAgICAgICApfVxuICAgKiAgICAgLz5cbiAgICpcbiAgICogUHJvdmlkZXMgYWRkaXRpb25hbCBtZXRhZGF0YSBsaWtlIGBpbmRleGAgaWYgeW91IG5lZWQgaXQsIGFzIHdlbGwgYXMgYSBtb3JlIGdlbmVyaWNcbiAgICogYHNlcGFyYXRvcnMudXBkYXRlUHJvcHNgIGZ1bmN0aW9uIHdoaWNoIGxldCdzIHlvdSBzZXQgd2hhdGV2ZXIgcHJvcHMgeW91IHdhbnQgdG8gY2hhbmdlIHRoZVxuICAgKiByZW5kZXJpbmcgb2YgZWl0aGVyIHRoZSBsZWFkaW5nIHNlcGFyYXRvciBvciB0cmFpbGluZyBzZXBhcmF0b3IgaW4gY2FzZSB0aGUgbW9yZSBjb21tb25cbiAgICogYGhpZ2hsaWdodGAgYW5kIGB1bmhpZ2hsaWdodGAgKHdoaWNoIHNldCB0aGUgYGhpZ2hsaWdodGVkOiBib29sZWFuYCBwcm9wKSBhcmUgaW5zdWZmaWNpZW50IGZvclxuICAgKiB5b3VyIHVzZS1jYXNlLlxuICAgKi9cbiAgTGlzdEl0ZW1Db21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICAvKipcbiAgICogUmVuZGVyZWQgd2hlbiB0aGUgbGlzdCBpcyBlbXB0eS4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLCBhIHJlbmRlciBmdW5jdGlvbiwgb3JcbiAgICogYSByZW5kZXJlZCBlbGVtZW50LlxuICAgKi9cbiAgTGlzdEVtcHR5Q29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICAvKipcbiAgICogUmVuZGVyZWQgYXQgdGhlIGJvdHRvbSBvZiBhbGwgdGhlIGl0ZW1zLiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0Rm9vdGVyQ29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICAvKipcbiAgICogU3R5bGluZyBmb3IgaW50ZXJuYWwgVmlldyBmb3IgTGlzdEZvb3RlckNvbXBvbmVudFxuICAgKi9cbiAgTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIFJlbmRlcmVkIGF0IHRoZSB0b3Agb2YgYWxsIHRoZSBpdGVtcy4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLCBhIHJlbmRlciBmdW5jdGlvbiwgb3JcbiAgICogYSByZW5kZXJlZCBlbGVtZW50LlxuICAgKi9cbiAgTGlzdEhlYWRlckNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFN0eWxpbmcgZm9yIGludGVybmFsIFZpZXcgZm9yIExpc3RIZWFkZXJDb21wb25lbnRcbiAgICovXG4gIExpc3RIZWFkZXJDb21wb25lbnRTdHlsZT86IFZpZXdTdHlsZVByb3AsXG4gIC8qKlxuICAgKiBPcHRpb25hbCBjdXN0b20gc3R5bGUgZm9yIG11bHRpLWl0ZW0gcm93cyBnZW5lcmF0ZWQgd2hlbiBudW1Db2x1bW5zID4gMS5cbiAgICovXG4gIGNvbHVtbldyYXBwZXJTdHlsZT86IFZpZXdTdHlsZVByb3AsXG4gIC8qKlxuICAgKiBBIG1hcmtlciBwcm9wZXJ0eSBmb3IgdGVsbGluZyB0aGUgbGlzdCB0byByZS1yZW5kZXIgKHNpbmNlIGl0IGltcGxlbWVudHMgYFB1cmVDb21wb25lbnRgKS4gSWZcbiAgICogYW55IG9mIHlvdXIgYHJlbmRlckl0ZW1gLCBIZWFkZXIsIEZvb3RlciwgZXRjLiBmdW5jdGlvbnMgZGVwZW5kIG9uIGFueXRoaW5nIG91dHNpZGUgb2YgdGhlXG4gICAqIGBkYXRhYCBwcm9wLCBzdGljayBpdCBoZXJlIGFuZCB0cmVhdCBpdCBpbW11dGFibHkuXG4gICAqL1xuICBleHRyYURhdGE/OiBhbnksXG4gIC8qKlxuICAgKiBgZ2V0SXRlbUxheW91dGAgaXMgYW4gb3B0aW9uYWwgb3B0aW1pemF0aW9ucyB0aGF0IGxldCB1cyBza2lwIG1lYXN1cmVtZW50IG9mIGR5bmFtaWMgY29udGVudCBpZlxuICAgKiB5b3Uga25vdyB0aGUgaGVpZ2h0IG9mIGl0ZW1zIGEgcHJpb3JpLiBgZ2V0SXRlbUxheW91dGAgaXMgdGhlIG1vc3QgZWZmaWNpZW50LCBhbmQgaXMgZWFzeSB0b1xuICAgKiB1c2UgaWYgeW91IGhhdmUgZml4ZWQgaGVpZ2h0IGl0ZW1zLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogICAgIGdldEl0ZW1MYXlvdXQ9eyhkYXRhLCBpbmRleCkgPT4gKFxuICAgKiAgICAgICB7bGVuZ3RoOiBJVEVNX0hFSUdIVCwgb2Zmc2V0OiBJVEVNX0hFSUdIVCAqIGluZGV4LCBpbmRleH1cbiAgICogICAgICl9XG4gICAqXG4gICAqIEFkZGluZyBgZ2V0SXRlbUxheW91dGAgY2FuIGJlIGEgZ3JlYXQgcGVyZm9ybWFuY2UgYm9vc3QgZm9yIGxpc3RzIG9mIHNldmVyYWwgaHVuZHJlZCBpdGVtcy5cbiAgICogUmVtZW1iZXIgdG8gaW5jbHVkZSBzZXBhcmF0b3IgbGVuZ3RoIChoZWlnaHQgb3Igd2lkdGgpIGluIHlvdXIgb2Zmc2V0IGNhbGN1bGF0aW9uIGlmIHlvdVxuICAgKiBzcGVjaWZ5IGBJdGVtU2VwYXJhdG9yQ29tcG9uZW50YC5cbiAgICovXG4gIGdldEl0ZW1MYXlvdXQ/OiAoXG4gICAgZGF0YTogP0FycmF5PEl0ZW1UPixcbiAgICBpbmRleDogbnVtYmVyLFxuICApID0+IHtsZW5ndGg6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIsIGluZGV4OiBudW1iZXJ9LFxuICAvKipcbiAgICogSWYgdHJ1ZSwgcmVuZGVycyBpdGVtcyBuZXh0IHRvIGVhY2ggb3RoZXIgaG9yaXpvbnRhbGx5IGluc3RlYWQgb2Ygc3RhY2tlZCB2ZXJ0aWNhbGx5LlxuICAgKi9cbiAgaG9yaXpvbnRhbD86ID9ib29sZWFuLFxuICAvKipcbiAgICogSG93IG1hbnkgaXRlbXMgdG8gcmVuZGVyIGluIHRoZSBpbml0aWFsIGJhdGNoLiBUaGlzIHNob3VsZCBiZSBlbm91Z2ggdG8gZmlsbCB0aGUgc2NyZWVuIGJ1dCBub3RcbiAgICogbXVjaCBtb3JlLiBOb3RlIHRoZXNlIGl0ZW1zIHdpbGwgbmV2ZXIgYmUgdW5tb3VudGVkIGFzIHBhcnQgb2YgdGhlIHdpbmRvd2VkIHJlbmRlcmluZyBpbiBvcmRlclxuICAgKiB0byBpbXByb3ZlIHBlcmNlaXZlZCBwZXJmb3JtYW5jZSBvZiBzY3JvbGwtdG8tdG9wIGFjdGlvbnMuXG4gICAqL1xuICBpbml0aWFsTnVtVG9SZW5kZXI6IG51bWJlcixcbiAgLyoqXG4gICAqIEluc3RlYWQgb2Ygc3RhcnRpbmcgYXQgdGhlIHRvcCB3aXRoIHRoZSBmaXJzdCBpdGVtLCBzdGFydCBhdCBgaW5pdGlhbFNjcm9sbEluZGV4YC4gVGhpc1xuICAgKiBkaXNhYmxlcyB0aGUgXCJzY3JvbGwgdG8gdG9wXCIgb3B0aW1pemF0aW9uIHRoYXQga2VlcHMgdGhlIGZpcnN0IGBpbml0aWFsTnVtVG9SZW5kZXJgIGl0ZW1zXG4gICAqIGFsd2F5cyByZW5kZXJlZCBhbmQgaW1tZWRpYXRlbHkgcmVuZGVycyB0aGUgaXRlbXMgc3RhcnRpbmcgYXQgdGhpcyBpbml0aWFsIGluZGV4LiBSZXF1aXJlc1xuICAgKiBgZ2V0SXRlbUxheW91dGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gICAqL1xuICBpbml0aWFsU2Nyb2xsSW5kZXg/OiA/bnVtYmVyLFxuICAvKipcbiAgICogUmV2ZXJzZXMgdGhlIGRpcmVjdGlvbiBvZiBzY3JvbGwuIFVzZXMgc2NhbGUgdHJhbnNmb3JtcyBvZiAtMS5cbiAgICovXG4gIGludmVydGVkPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBVc2VkIHRvIGV4dHJhY3QgYSB1bmlxdWUga2V5IGZvciBhIGdpdmVuIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCBpbmRleC4gS2V5IGlzIHVzZWQgZm9yIGNhY2hpbmdcbiAgICogYW5kIGFzIHRoZSByZWFjdCBrZXkgdG8gdHJhY2sgaXRlbSByZS1vcmRlcmluZy4gVGhlIGRlZmF1bHQgZXh0cmFjdG9yIGNoZWNrcyBgaXRlbS5rZXlgLCB0aGVuXG4gICAqIGZhbGxzIGJhY2sgdG8gdXNpbmcgdGhlIGluZGV4LCBsaWtlIFJlYWN0IGRvZXMuXG4gICAqL1xuICBrZXlFeHRyYWN0b3I6IChpdGVtOiBJdGVtVCwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAvKipcbiAgICogTXVsdGlwbGUgY29sdW1ucyBjYW4gb25seSBiZSByZW5kZXJlZCB3aXRoIGBob3Jpem9udGFsPXtmYWxzZX1gIGFuZCB3aWxsIHppZy16YWcgbGlrZSBhXG4gICAqIGBmbGV4V3JhcGAgbGF5b3V0LiBJdGVtcyBzaG91bGQgYWxsIGJlIHRoZSBzYW1lIGhlaWdodCAtIG1hc29ucnkgbGF5b3V0cyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICovXG4gIG51bUNvbHVtbnM6IG51bWJlcixcbiAgLyoqXG4gICAqIENhbGxlZCBvbmNlIHdoZW4gdGhlIHNjcm9sbCBwb3NpdGlvbiBnZXRzIHdpdGhpbiBgb25FbmRSZWFjaGVkVGhyZXNob2xkYCBvZiB0aGUgcmVuZGVyZWRcbiAgICogY29udGVudC5cbiAgICovXG4gIG9uRW5kUmVhY2hlZD86ID8oaW5mbzoge2Rpc3RhbmNlRnJvbUVuZDogbnVtYmVyfSkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIEhvdyBmYXIgZnJvbSB0aGUgZW5kIChpbiB1bml0cyBvZiB2aXNpYmxlIGxlbmd0aCBvZiB0aGUgbGlzdCkgdGhlIGJvdHRvbSBlZGdlIG9mIHRoZVxuICAgKiBsaXN0IG11c3QgYmUgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb250ZW50IHRvIHRyaWdnZXIgdGhlIGBvbkVuZFJlYWNoZWRgIGNhbGxiYWNrLlxuICAgKiBUaHVzIGEgdmFsdWUgb2YgMC41IHdpbGwgdHJpZ2dlciBgb25FbmRSZWFjaGVkYCB3aGVuIHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQgaXNcbiAgICogd2l0aGluIGhhbGYgdGhlIHZpc2libGUgbGVuZ3RoIG9mIHRoZSBsaXN0LlxuICAgKi9cbiAgb25FbmRSZWFjaGVkVGhyZXNob2xkPzogP251bWJlcixcbiAgLyoqXG4gICAqIElmIHByb3ZpZGVkLCBhIHN0YW5kYXJkIFJlZnJlc2hDb250cm9sIHdpbGwgYmUgYWRkZWQgZm9yIFwiUHVsbCB0byBSZWZyZXNoXCIgZnVuY3Rpb25hbGl0eS4gTWFrZVxuICAgKiBzdXJlIHRvIGFsc28gc2V0IHRoZSBgcmVmcmVzaGluZ2AgcHJvcCBjb3JyZWN0bHkuXG4gICAqL1xuICBvblJlZnJlc2g/OiA/KCkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3YWJpbGl0eSBvZiByb3dzIGNoYW5nZXMsIGFzIGRlZmluZWQgYnkgdGhlIGB2aWV3YWJpbGl0eUNvbmZpZ2AgcHJvcC5cbiAgICovXG4gIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ/OiA/KGluZm86IHtcbiAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIGNoYW5nZWQ6IEFycmF5PFZpZXdUb2tlbj4sXG4gIH0pID0+IHZvaWQsXG4gIC8qKlxuICAgKiBTZXQgdGhpcyB3aGVuIG9mZnNldCBpcyBuZWVkZWQgZm9yIHRoZSBsb2FkaW5nIGluZGljYXRvciB0byBzaG93IGNvcnJlY3RseS5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHByb2dyZXNzVmlld09mZnNldD86IG51bWJlcixcbiAgLyoqXG4gICAqIFRoZSBsZWdhY3kgaW1wbGVtZW50YXRpb24gaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5cbiAgICovXG4gIGxlZ2FjeUltcGxlbWVudGF0aW9uPzogZW1wdHksXG4gIC8qKlxuICAgKiBTZXQgdGhpcyB0cnVlIHdoaWxlIHdhaXRpbmcgZm9yIG5ldyBkYXRhIGZyb20gYSByZWZyZXNoLlxuICAgKi9cbiAgcmVmcmVzaGluZz86ID9ib29sZWFuLFxuICAvKipcbiAgICogTm90ZTogbWF5IGhhdmUgYnVncyAobWlzc2luZyBjb250ZW50KSBpbiBzb21lIGNpcmN1bXN0YW5jZXMgLSB1c2UgYXQgeW91ciBvd24gcmlzay5cbiAgICpcbiAgICogVGhpcyBtYXkgaW1wcm92ZSBzY3JvbGwgcGVyZm9ybWFuY2UgZm9yIGxhcmdlIGxpc3RzLlxuICAgKi9cbiAgcmVtb3ZlQ2xpcHBlZFN1YnZpZXdzPzogYm9vbGVhbixcbiAgLyoqXG4gICAqIFNlZSBgVmlld2FiaWxpdHlIZWxwZXJgIGZvciBmbG93IHR5cGUgYW5kIGZ1cnRoZXIgZG9jdW1lbnRhdGlvbi5cbiAgICovXG4gIHZpZXdhYmlsaXR5Q29uZmlnPzogVmlld2FiaWxpdHlDb25maWcsXG4gIC8qKlxuICAgKiBMaXN0IG9mIFZpZXdhYmlsaXR5Q29uZmlnL29uVmlld2FibGVJdGVtc0NoYW5nZWQgcGFpcnMuIEEgc3BlY2lmaWMgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZFxuICAgKiB3aWxsIGJlIGNhbGxlZCB3aGVuIGl0cyBjb3JyZXNwb25kaW5nIFZpZXdhYmlsaXR5Q29uZmlnJ3MgY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgKi9cbiAgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzPzogQXJyYXk8Vmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXI+LFxufTtcbmV4cG9ydCB0eXBlIFByb3BzPEl0ZW1UPiA9IFJlcXVpcmVkUHJvcHM8SXRlbVQ+ICZcbiAgT3B0aW9uYWxQcm9wczxJdGVtVD4gJlxuICBWaXJ0dWFsaXplZExpc3RQcm9wcztcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAuLi5WaXJ0dWFsaXplZExpc3QuZGVmYXVsdFByb3BzLFxuICBudW1Db2x1bW5zOiAxLFxuICAvKipcbiAgICogRW5hYmxpbmcgdGhpcyBwcm9wIG9uIEFuZHJvaWQgZ3JlYXRseSBpbXByb3ZlcyBzY3JvbGxpbmcgcGVyZm9ybWFuY2Ugd2l0aCBubyBrbm93biBpc3N1ZXMuXG4gICAqIFRoZSBhbHRlcm5hdGl2ZSBpcyB0aGF0IHNjcm9sbGluZyBvbiBBbmRyb2lkIGlzIHVudXNhYmx5IGJhZC4gRW5hYmxpbmcgaXQgb24gaU9TIGhhcyBhIGZld1xuICAgKiBrbm93biBpc3N1ZXMuXG4gICAqL1xuICByZW1vdmVDbGlwcGVkU3Vidmlld3M6IFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcsXG59O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFByb3BzID0gdHlwZW9mIGRlZmF1bHRQcm9wcztcblxuLyoqXG4gKiBBIHBlcmZvcm1hbnQgaW50ZXJmYWNlIGZvciByZW5kZXJpbmcgc2ltcGxlLCBmbGF0IGxpc3RzLCBzdXBwb3J0aW5nIHRoZSBtb3N0IGhhbmR5IGZlYXR1cmVzOlxuICpcbiAqICAtIEZ1bGx5IGNyb3NzLXBsYXRmb3JtLlxuICogIC0gT3B0aW9uYWwgaG9yaXpvbnRhbCBtb2RlLlxuICogIC0gQ29uZmlndXJhYmxlIHZpZXdhYmlsaXR5IGNhbGxiYWNrcy5cbiAqICAtIEhlYWRlciBzdXBwb3J0LlxuICogIC0gRm9vdGVyIHN1cHBvcnQuXG4gKiAgLSBTZXBhcmF0b3Igc3VwcG9ydC5cbiAqICAtIFB1bGwgdG8gUmVmcmVzaC5cbiAqICAtIFNjcm9sbCBsb2FkaW5nLlxuICogIC0gU2Nyb2xsVG9JbmRleCBzdXBwb3J0LlxuICpcbiAqIElmIHlvdSBuZWVkIHNlY3Rpb24gc3VwcG9ydCwgdXNlIFtgPFNlY3Rpb25MaXN0PmBdKGRvY3Mvc2VjdGlvbmxpc3QuaHRtbCkuXG4gKlxuICogTWluaW1hbCBFeGFtcGxlOlxuICpcbiAqICAgICA8RmxhdExpc3RcbiAqICAgICAgIGRhdGE9e1t7a2V5OiAnYSd9LCB7a2V5OiAnYid9XX1cbiAqICAgICAgIHJlbmRlckl0ZW09eyh7aXRlbX0pID0+IDxUZXh0PntpdGVtLmtleX08L1RleHQ+fVxuICogICAgIC8+XG4gKlxuICogTW9yZSBjb21wbGV4LCBtdWx0aS1zZWxlY3QgZXhhbXBsZSBkZW1vbnN0cmF0aW5nIGBQdXJlQ29tcG9uZW50YCB1c2FnZSBmb3IgcGVyZiBvcHRpbWl6YXRpb24gYW5kIGF2b2lkaW5nIGJ1Z3MuXG4gKlxuICogLSBCeSBiaW5kaW5nIHRoZSBgb25QcmVzc0l0ZW1gIGhhbmRsZXIsIHRoZSBwcm9wcyB3aWxsIHJlbWFpbiBgPT09YCBhbmQgYFB1cmVDb21wb25lbnRgIHdpbGxcbiAqICAgcHJldmVudCB3YXN0ZWZ1bCByZS1yZW5kZXJzIHVubGVzcyB0aGUgYWN0dWFsIGBpZGAsIGBzZWxlY3RlZGAsIG9yIGB0aXRsZWAgcHJvcHMgY2hhbmdlLCBldmVuXG4gKiAgIGlmIHRoZSBjb21wb25lbnRzIHJlbmRlcmVkIGluIGBNeUxpc3RJdGVtYCBkaWQgbm90IGhhdmUgc3VjaCBvcHRpbWl6YXRpb25zLlxuICogLSBCeSBwYXNzaW5nIGBleHRyYURhdGE9e3RoaXMuc3RhdGV9YCB0byBgRmxhdExpc3RgIHdlIG1ha2Ugc3VyZSBgRmxhdExpc3RgIGl0c2VsZiB3aWxsIHJlLXJlbmRlclxuICogICB3aGVuIHRoZSBgc3RhdGUuc2VsZWN0ZWRgIGNoYW5nZXMuIFdpdGhvdXQgc2V0dGluZyB0aGlzIHByb3AsIGBGbGF0TGlzdGAgd291bGQgbm90IGtub3cgaXRcbiAqICAgbmVlZHMgdG8gcmUtcmVuZGVyIGFueSBpdGVtcyBiZWNhdXNlIGl0IGlzIGFsc28gYSBgUHVyZUNvbXBvbmVudGAgYW5kIHRoZSBwcm9wIGNvbXBhcmlzb24gd2lsbFxuICogICBub3Qgc2hvdyBhbnkgY2hhbmdlcy5cbiAqIC0gYGtleUV4dHJhY3RvcmAgdGVsbHMgdGhlIGxpc3QgdG8gdXNlIHRoZSBgaWRgcyBmb3IgdGhlIHJlYWN0IGtleXMgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBga2V5YCBwcm9wZXJ0eS5cbiAqXG4gKlxuICogICAgIGNsYXNzIE15TGlzdEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIF9vblByZXNzID0gKCkgPT4ge1xuICogICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3NJdGVtKHRoaXMucHJvcHMuaWQpO1xuICogICAgICAgfTtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IHRoaXMucHJvcHMuc2VsZWN0ZWQgPyBcInJlZFwiIDogXCJibGFja1wiO1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e3RoaXMuX29uUHJlc3N9PlxuICogICAgICAgICAgICAgPFZpZXc+XG4gKiAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt7IGNvbG9yOiB0ZXh0Q29sb3IgfX0+XG4gKiAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudGl0bGV9XG4gKiAgICAgICAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgICAgICAgIDwvVmlldz5cbiAqICAgICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqICAgICBjbGFzcyBNdWx0aVNlbGVjdExpc3QgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIHN0YXRlID0ge3NlbGVjdGVkOiAobmV3IE1hcCgpOiBNYXA8c3RyaW5nLCBib29sZWFuPil9O1xuICpcbiAqICAgICAgIF9rZXlFeHRyYWN0b3IgPSAoaXRlbSwgaW5kZXgpID0+IGl0ZW0uaWQ7XG4gKlxuICogICAgICAgX29uUHJlc3NJdGVtID0gKGlkOiBzdHJpbmcpID0+IHtcbiAqICAgICAgICAgLy8gdXBkYXRlciBmdW5jdGlvbnMgYXJlIHByZWZlcnJlZCBmb3IgdHJhbnNhY3Rpb25hbCB1cGRhdGVzXG4gKiAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gKiAgICAgICAgICAgLy8gY29weSB0aGUgbWFwIHJhdGhlciB0aGFuIG1vZGlmeWluZyBzdGF0ZS5cbiAqICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IG5ldyBNYXAoc3RhdGUuc2VsZWN0ZWQpO1xuICogICAgICAgICAgIHNlbGVjdGVkLnNldChpZCwgIXNlbGVjdGVkLmdldChpZCkpOyAvLyB0b2dnbGVcbiAqICAgICAgICAgICByZXR1cm4ge3NlbGVjdGVkfTtcbiAqICAgICAgICAgfSk7XG4gKiAgICAgICB9O1xuICpcbiAqICAgICAgIF9yZW5kZXJJdGVtID0gKHtpdGVtfSkgPT4gKFxuICogICAgICAgICA8TXlMaXN0SXRlbVxuICogICAgICAgICAgIGlkPXtpdGVtLmlkfVxuICogICAgICAgICAgIG9uUHJlc3NJdGVtPXt0aGlzLl9vblByZXNzSXRlbX1cbiAqICAgICAgICAgICBzZWxlY3RlZD17ISF0aGlzLnN0YXRlLnNlbGVjdGVkLmdldChpdGVtLmlkKX1cbiAqICAgICAgICAgICB0aXRsZT17aXRlbS50aXRsZX1cbiAqICAgICAgICAgLz5cbiAqICAgICAgICk7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxGbGF0TGlzdFxuICogICAgICAgICAgICAgZGF0YT17dGhpcy5wcm9wcy5kYXRhfVxuICogICAgICAgICAgICAgZXh0cmFEYXRhPXt0aGlzLnN0YXRlfVxuICogICAgICAgICAgICAga2V5RXh0cmFjdG9yPXt0aGlzLl9rZXlFeHRyYWN0b3J9XG4gKiAgICAgICAgICAgICByZW5kZXJJdGVtPXt0aGlzLl9yZW5kZXJJdGVtfVxuICogICAgICAgICAgIC8+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBbYDxWaXJ0dWFsaXplZExpc3Q+YF0oZG9jcy92aXJ0dWFsaXplZGxpc3QuaHRtbCksXG4gKiBhbmQgdGh1cyBpbmhlcml0cyBpdHMgcHJvcHMgKGFzIHdlbGwgYXMgdGhvc2Ugb2YgYFNjcm9sbFZpZXdgKSB0aGF0IGFyZW4ndCBleHBsaWNpdGx5IGxpc3RlZFxuICogaGVyZSwgYWxvbmcgd2l0aCB0aGUgZm9sbG93aW5nIGNhdmVhdHM6XG4gKlxuICogLSBJbnRlcm5hbCBzdGF0ZSBpcyBub3QgcHJlc2VydmVkIHdoZW4gY29udGVudCBzY3JvbGxzIG91dCBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gTWFrZSBzdXJlIGFsbFxuICogICB5b3VyIGRhdGEgaXMgY2FwdHVyZWQgaW4gdGhlIGl0ZW0gZGF0YSBvciBleHRlcm5hbCBzdG9yZXMgbGlrZSBGbHV4LCBSZWR1eCwgb3IgUmVsYXkuXG4gKiAtIFRoaXMgaXMgYSBgUHVyZUNvbXBvbmVudGAgd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIG5vdCByZS1yZW5kZXIgaWYgYHByb3BzYCByZW1haW4gc2hhbGxvdy1cbiAqICAgZXF1YWwuIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgeW91ciBgcmVuZGVySXRlbWAgZnVuY3Rpb24gZGVwZW5kcyBvbiBpcyBwYXNzZWQgYXMgYSBwcm9wXG4gKiAgIChlLmcuIGBleHRyYURhdGFgKSB0aGF0IGlzIG5vdCBgPT09YCBhZnRlciB1cGRhdGVzLCBvdGhlcndpc2UgeW91ciBVSSBtYXkgbm90IHVwZGF0ZSBvblxuICogICBjaGFuZ2VzLiBUaGlzIGluY2x1ZGVzIHRoZSBgZGF0YWAgcHJvcCBhbmQgcGFyZW50IGNvbXBvbmVudCBzdGF0ZS5cbiAqIC0gSW4gb3JkZXIgdG8gY29uc3RyYWluIG1lbW9yeSBhbmQgZW5hYmxlIHNtb290aCBzY3JvbGxpbmcsIGNvbnRlbnQgaXMgcmVuZGVyZWQgYXN5bmNocm9ub3VzbHlcbiAqICAgb2Zmc2NyZWVuLiBUaGlzIG1lYW5zIGl0J3MgcG9zc2libGUgdG8gc2Nyb2xsIGZhc3RlciB0aGFuIHRoZSBmaWxsIHJhdGUgYW5kcyBtb21lbnRhcmlseSBzZWVcbiAqICAgYmxhbmsgY29udGVudC4gVGhpcyBpcyBhIHRyYWRlb2ZmIHRoYXQgY2FuIGJlIGFkanVzdGVkIHRvIHN1aXQgdGhlIG5lZWRzIG9mIGVhY2ggYXBwbGljYXRpb24sXG4gKiAgIGFuZCB3ZSBhcmUgd29ya2luZyBvbiBpbXByb3ZpbmcgaXQgYmVoaW5kIHRoZSBzY2VuZXMuXG4gKiAtIEJ5IGRlZmF1bHQsIHRoZSBsaXN0IGxvb2tzIGZvciBhIGBrZXlgIHByb3Agb24gZWFjaCBpdGVtIGFuZCB1c2VzIHRoYXQgZm9yIHRoZSBSZWFjdCBrZXkuXG4gKiAgIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcHJvdmlkZSBhIGN1c3RvbSBga2V5RXh0cmFjdG9yYCBwcm9wLlxuICpcbiAqIEFsc28gaW5oZXJpdHMgW1Njcm9sbFZpZXcgUHJvcHNdKGRvY3Mvc2Nyb2xsdmlldy5odG1sI3Byb3BzKSwgdW5sZXNzIGl0IGlzIG5lc3RlZCBpbiBhbm90aGVyIEZsYXRMaXN0IG9mIHNhbWUgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEZsYXRMaXN0PEl0ZW1UPiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHM8SXRlbVQ+LCB2b2lkPiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHM6IERlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbiAgcHJvcHM6IFByb3BzPEl0ZW1UPjtcbiAgLyoqXG4gICAqIFNjcm9sbHMgdG8gdGhlIGVuZCBvZiB0aGUgY29udGVudC4gTWF5IGJlIGphbmt5IHdpdGhvdXQgYGdldEl0ZW1MYXlvdXRgIHByb3AuXG4gICAqL1xuICBzY3JvbGxUb0VuZChwYXJhbXM/OiA/e2FuaW1hdGVkPzogP2Jvb2xlYW59KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9FbmQocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0byB0aGUgaXRlbSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHN1Y2ggdGhhdCBpdCBpcyBwb3NpdGlvbmVkIGluIHRoZSB2aWV3YWJsZSBhcmVhXG4gICAqIHN1Y2ggdGhhdCBgdmlld1Bvc2l0aW9uYCAwIHBsYWNlcyBpdCBhdCB0aGUgdG9wLCAxIGF0IHRoZSBib3R0b20sIGFuZCAwLjUgY2VudGVyZWQgaW4gdGhlXG4gICAqIG1pZGRsZS4gYHZpZXdPZmZzZXRgIGlzIGEgZml4ZWQgbnVtYmVyIG9mIHBpeGVscyB0byBvZmZzZXQgdGhlIGZpbmFsIHRhcmdldCBwb3NpdGlvbi5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JbmRleChwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdmlld09mZnNldD86IG51bWJlcixcbiAgICB2aWV3UG9zaXRpb24/OiBudW1iZXIsXG4gIH0pIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgdGhpcy5fbGlzdFJlZi5zY3JvbGxUb0luZGV4KHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVpcmVzIGxpbmVhciBzY2FuIHRocm91Z2ggZGF0YSAtIHVzZSBgc2Nyb2xsVG9JbmRleGAgaW5zdGVhZCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JdGVtKHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaXRlbTogSXRlbVQsXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICB9KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9JdGVtKHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBhIHNwZWNpZmljIGNvbnRlbnQgcGl4ZWwgb2Zmc2V0IGluIHRoZSBsaXN0LlxuICAgKlxuICAgKiBDaGVjayBvdXQgW3Njcm9sbFRvT2Zmc2V0XShkb2NzL3ZpcnR1YWxpemVkbGlzdC5odG1sI3Njcm9sbHRvb2Zmc2V0KSBvZiBWaXJ0dWFsaXplZExpc3RcbiAgICovXG4gIHNjcm9sbFRvT2Zmc2V0KHBhcmFtczoge2FuaW1hdGVkPzogP2Jvb2xlYW4sIG9mZnNldDogbnVtYmVyfSkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICB0aGlzLl9saXN0UmVmLnNjcm9sbFRvT2Zmc2V0KHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGxzIHRoZSBsaXN0IGFuIGludGVyYWN0aW9uIGhhcyBvY2N1cnJlZCwgd2hpY2ggc2hvdWxkIHRyaWdnZXIgdmlld2FiaWxpdHkgY2FsY3VsYXRpb25zLCBlLmcuXG4gICAqIGlmIGB3YWl0Rm9ySW50ZXJhY3Rpb25zYCBpcyB0cnVlIGFuZCB0aGUgdXNlciBoYXMgbm90IHNjcm9sbGVkLiBUaGlzIGlzIHR5cGljYWxseSBjYWxsZWQgYnlcbiAgICogdGFwcyBvbiBpdGVtcyBvciBieSBuYXZpZ2F0aW9uIGFjdGlvbnMuXG4gICAqL1xuICByZWNvcmRJbnRlcmFjdGlvbigpIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgdGhpcy5fbGlzdFJlZi5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgc2Nyb2xsIGluZGljYXRvcnMgbW9tZW50YXJpbHkuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgdGhpcy5fbGlzdFJlZi5mbGFzaFNjcm9sbEluZGljYXRvcnMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBoYW5kbGUgdG8gdGhlIHVuZGVybHlpbmcgc2Nyb2xsIHJlc3BvbmRlci5cbiAgICovXG4gIGdldFNjcm9sbFJlc3BvbmRlcigpOiBhbnkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGlzdFJlZi5nZXRTY3JvbGxSZXNwb25kZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxhYmxlTm9kZSgpOiBhbnkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGlzdFJlZi5nZXRTY3JvbGxhYmxlTm9kZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldE5hdGl2ZVByb3BzKHByb3BzOiB7W3N0cmluZ106IG1peGVkfSkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICB0aGlzLl9saXN0UmVmLnNldE5hdGl2ZVByb3BzKHByb3BzKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHM8SXRlbVQ+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuX2NoZWNrUHJvcHModGhpcy5wcm9wcyk7XG4gICAgaWYgKHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzKSB7XG4gICAgICB0aGlzLl92aXJ0dWFsaXplZExpc3RQYWlycyA9IHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzLm1hcChcbiAgICAgICAgcGFpciA9PiAoe1xuICAgICAgICAgIHZpZXdhYmlsaXR5Q29uZmlnOiBwYWlyLnZpZXdhYmlsaXR5Q29uZmlnLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHRoaXMuX2NyZWF0ZU9uVmlld2FibGVJdGVtc0NoYW5nZWQoXG4gICAgICAgICAgICBwYWlyLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgICAgKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkKSB7XG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjYzIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpc1xuICAgICAgICogY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICB0aGlzLl92aXJ0dWFsaXplZExpc3RQYWlycy5wdXNoKHtcbiAgICAgICAgdmlld2FiaWxpdHlDb25maWc6IHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWcsXG4gICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHRoaXMuX2NyZWF0ZU9uVmlld2FibGVJdGVtc0NoYW5nZWQoXG4gICAgICAgICAgdGhpcy5wcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHM8SXRlbVQ+KSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgcHJldlByb3BzLm51bUNvbHVtbnMgPT09IHRoaXMucHJvcHMubnVtQ29sdW1ucyxcbiAgICAgICdDaGFuZ2luZyBudW1Db2x1bW5zIG9uIHRoZSBmbHkgaXMgbm90IHN1cHBvcnRlZC4gQ2hhbmdlIHRoZSBrZXkgcHJvcCBvbiBGbGF0TGlzdCB3aGVuICcgK1xuICAgICAgICAnY2hhbmdpbmcgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGZvcmNlIGEgZnJlc2ggcmVuZGVyIG9mIHRoZSBjb21wb25lbnQuJyxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIHByZXZQcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkID09PSB0aGlzLnByb3BzLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAnQ2hhbmdpbmcgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBvbiB0aGUgZmx5IGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgIWRlZXBEaWZmZXIocHJldlByb3BzLnZpZXdhYmlsaXR5Q29uZmlnLCB0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnKSxcbiAgICAgICdDaGFuZ2luZyB2aWV3YWJpbGl0eUNvbmZpZyBvbiB0aGUgZmx5IGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgcHJldlByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyA9PT1cbiAgICAgICAgdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMsXG4gICAgICAnQ2hhbmdpbmcgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIG9uIHRoZSBmbHkgaXMgbm90IHN1cHBvcnRlZCcsXG4gICAgKTtcblxuICAgIHRoaXMuX2NoZWNrUHJvcHModGhpcy5wcm9wcyk7XG4gIH1cblxuICBfbGlzdFJlZjogP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpcnR1YWxpemVkTGlzdD47XG4gIF92aXJ0dWFsaXplZExpc3RQYWlyczogQXJyYXk8Vmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXI+ID0gW107XG5cbiAgX2NhcHR1cmVSZWYgPSByZWYgPT4ge1xuICAgIHRoaXMuX2xpc3RSZWYgPSByZWY7XG4gIH07XG5cbiAgX2NoZWNrUHJvcHMocHJvcHM6IFByb3BzPEl0ZW1UPikge1xuICAgIGNvbnN0IHtcbiAgICAgIGdldEl0ZW0sXG4gICAgICBnZXRJdGVtQ291bnQsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgbnVtQ29sdW1ucyxcbiAgICAgIGNvbHVtbldyYXBwZXJTdHlsZSxcbiAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICB2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMsXG4gICAgfSA9IHByb3BzO1xuICAgIGludmFyaWFudChcbiAgICAgICFnZXRJdGVtICYmICFnZXRJdGVtQ291bnQsXG4gICAgICAnRmxhdExpc3QgZG9lcyBub3Qgc3VwcG9ydCBjdXN0b20gZGF0YSBmb3JtYXRzLicsXG4gICAgKTtcbiAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgIGludmFyaWFudCghaG9yaXpvbnRhbCwgJ251bUNvbHVtbnMgZG9lcyBub3Qgc3VwcG9ydCBob3Jpem9udGFsLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICFjb2x1bW5XcmFwcGVyU3R5bGUsXG4gICAgICAgICdjb2x1bW5XcmFwcGVyU3R5bGUgbm90IHN1cHBvcnRlZCBmb3Igc2luZ2xlIGNvbHVtbiBsaXN0cycsXG4gICAgICApO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICAhKG9uVmlld2FibGVJdGVtc0NoYW5nZWQgJiYgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzKSxcbiAgICAgICdGbGF0TGlzdCBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgYm90aCBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIGFuZCAnICtcbiAgICAgICAgJ3ZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycy4nLFxuICAgICk7XG4gIH1cblxuICBfZ2V0SXRlbSA9IChkYXRhOiBBcnJheTxJdGVtVD4sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB7bnVtQ29sdW1uc30gPSB0aGlzLnByb3BzO1xuICAgIGlmIChudW1Db2x1bW5zID4gMSkge1xuICAgICAgY29uc3QgcmV0ID0gW107XG4gICAgICBmb3IgKGxldCBrayA9IDA7IGtrIDwgbnVtQ29sdW1uczsga2srKykge1xuICAgICAgICBjb25zdCBpdGVtID0gZGF0YVtpbmRleCAqIG51bUNvbHVtbnMgKyBra107XG4gICAgICAgIGlmIChpdGVtICE9IG51bGwpIHtcbiAgICAgICAgICByZXQucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRhdGFbaW5kZXhdO1xuICAgIH1cbiAgfTtcblxuICBfZ2V0SXRlbUNvdW50ID0gKGRhdGE6ID9BcnJheTxJdGVtVD4pOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBkYXRhID8gTWF0aC5jZWlsKGRhdGEubGVuZ3RoIC8gdGhpcy5wcm9wcy5udW1Db2x1bW5zKSA6IDA7XG4gIH07XG5cbiAgX2tleUV4dHJhY3RvciA9IChpdGVtczogSXRlbVQgfCBBcnJheTxJdGVtVD4sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB7a2V5RXh0cmFjdG9yLCBudW1Db2x1bW5zfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKG51bUNvbHVtbnMgPiAxKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIEFycmF5LmlzQXJyYXkoaXRlbXMpLFxuICAgICAgICAnRmxhdExpc3Q6IEVuY291bnRlcmVkIGludGVybmFsIGNvbnNpc3RlbmN5IGVycm9yLCBleHBlY3RlZCBlYWNoIGl0ZW0gdG8gY29uc2lzdCBvZiBhbiAnICtcbiAgICAgICAgICAnYXJyYXkgd2l0aCAxLSVzIGNvbHVtbnM7IGluc3RlYWQsIHJlY2VpdmVkIGEgc2luZ2xlIGl0ZW0uJyxcbiAgICAgICAgbnVtQ29sdW1ucyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLm1hcCgoaXQsIGtrKSA9PiBrZXlFeHRyYWN0b3IoaXQsIGluZGV4ICogbnVtQ29sdW1ucyArIGtrKSlcbiAgICAgICAgLmpvaW4oJzonKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGtleUV4dHJhY3RvcihpdGVtcywgaW5kZXgpO1xuICAgIH1cbiAgfTtcblxuICBfcHVzaE11bHRpQ29sdW1uVmlld2FibGUoYXJyOiBBcnJheTxWaWV3VG9rZW4+LCB2OiBWaWV3VG9rZW4pOiB2b2lkIHtcbiAgICBjb25zdCB7bnVtQ29sdW1ucywga2V5RXh0cmFjdG9yfSA9IHRoaXMucHJvcHM7XG4gICAgdi5pdGVtLmZvckVhY2goKGl0ZW0sIGlpKSA9PiB7XG4gICAgICBpbnZhcmlhbnQodi5pbmRleCAhPSBudWxsLCAnTWlzc2luZyBpbmRleCEnKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gdi5pbmRleCAqIG51bUNvbHVtbnMgKyBpaTtcbiAgICAgIGFyci5wdXNoKHsuLi52LCBpdGVtLCBrZXk6IGtleUV4dHJhY3RvcihpdGVtLCBpbmRleCksIGluZGV4fSk7XG4gICAgfSk7XG4gIH1cblxuICBfY3JlYXRlT25WaWV3YWJsZUl0ZW1zQ2hhbmdlZChcbiAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiA/KGluZm86IHtcbiAgICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgICBjaGFuZ2VkOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIH0pID0+IHZvaWQsXG4gICkge1xuICAgIHJldHVybiAoaW5mbzoge1xuICAgICAgdmlld2FibGVJdGVtczogQXJyYXk8Vmlld1Rva2VuPixcbiAgICAgIGNoYW5nZWQ6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3Qge251bUNvbHVtbnN9ID0gdGhpcy5wcm9wcztcbiAgICAgIGlmIChvblZpZXdhYmxlSXRlbXNDaGFuZ2VkKSB7XG4gICAgICAgIGlmIChudW1Db2x1bW5zID4gMSkge1xuICAgICAgICAgIGNvbnN0IGNoYW5nZWQgPSBbXTtcbiAgICAgICAgICBjb25zdCB2aWV3YWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgaW5mby52aWV3YWJsZUl0ZW1zLmZvckVhY2godiA9PlxuICAgICAgICAgICAgdGhpcy5fcHVzaE11bHRpQ29sdW1uVmlld2FibGUodmlld2FibGVJdGVtcywgdiksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpbmZvLmNoYW5nZWQuZm9yRWFjaCh2ID0+IHRoaXMuX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlKGNoYW5nZWQsIHYpKTtcbiAgICAgICAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkKHt2aWV3YWJsZUl0ZW1zLCBjaGFuZ2VkfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZChpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBfcmVuZGVyZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICByZW5kZXJJdGVtLFxuICAgICAgbnVtQ29sdW1ucyxcbiAgICAgIGNvbHVtbldyYXBwZXJTdHlsZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGxldCB2aXJ0dWFsaXplZExpc3RSZW5kZXJLZXkgPSBMaXN0SXRlbUNvbXBvbmVudFxuICAgICAgPyAnTGlzdEl0ZW1Db21wb25lbnQnXG4gICAgICA6ICdyZW5kZXJJdGVtJztcblxuICAgIGNvbnN0IHJlbmRlcmVyID0gcHJvcHMgPT4ge1xuICAgICAgaWYgKExpc3RJdGVtQ29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiA8TGlzdEl0ZW1Db21wb25lbnQgey4uLnByb3BzfSAvPjtcbiAgICAgIH0gZWxzZSBpZiAocmVuZGVySXRlbSkge1xuICAgICAgICByZXR1cm4gcmVuZGVySXRlbShwcm9wcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIFt2aXJ0dWFsaXplZExpc3RSZW5kZXJLZXldOiAoaW5mbzogUmVuZGVySXRlbVByb3BzPEl0ZW1UPikgPT4ge1xuICAgICAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgICAgICBjb25zdCB7aXRlbSwgaW5kZXh9ID0gaW5mbztcbiAgICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGl0ZW0pLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIGFycmF5IG9mIGl0ZW1zIHdpdGggbnVtQ29sdW1ucyA+IDEnLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgICAgc3R5bGVzLnJvdyxcbiAgICAgICAgICAgICAgICBjb2x1bW5XcmFwcGVyU3R5bGUsXG4gICAgICAgICAgICAgICl9PlxuICAgICAgICAgICAgICB7aXRlbS5tYXAoKGl0LCBraykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSByZW5kZXJlcih7XG4gICAgICAgICAgICAgICAgICBpdGVtOiBpdCxcbiAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCAqIG51bUNvbHVtbnMgKyBrayxcbiAgICAgICAgICAgICAgICAgIHNlcGFyYXRvcnM6IGluZm8uc2VwYXJhdG9ycyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudCAhPSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17a2t9PntlbGVtZW50fTwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgKSA6IG51bGw7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlcmVyKGluZm8pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH07XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIHJldHVybiAoXG4gICAgICA8VmlydHVhbGl6ZWRMaXN0XG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICBnZXRJdGVtPXt0aGlzLl9nZXRJdGVtfVxuICAgICAgICBnZXRJdGVtQ291bnQ9e3RoaXMuX2dldEl0ZW1Db3VudH1cbiAgICAgICAga2V5RXh0cmFjdG9yPXt0aGlzLl9rZXlFeHRyYWN0b3J9XG4gICAgICAgIHJlZj17dGhpcy5fY2FwdHVyZVJlZn1cbiAgICAgICAgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzPXt0aGlzLl92aXJ0dWFsaXplZExpc3RQYWlyc31cbiAgICAgICAgey4uLnRoaXMuX3JlbmRlcmVyKCl9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICByb3c6IHtmbGV4RGlyZWN0aW9uOiAncm93J30sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGbGF0TGlzdDtcbiJdfQ==