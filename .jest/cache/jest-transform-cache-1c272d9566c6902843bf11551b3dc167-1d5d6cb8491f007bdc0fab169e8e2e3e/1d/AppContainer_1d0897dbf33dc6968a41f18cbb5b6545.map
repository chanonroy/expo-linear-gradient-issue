{"version":3,"sources":["AppContainer.js"],"names":["EmitterSubscription","require","PropTypes","RCTDeviceEventEmitter","React","ReactNative","RootTagContext","StyleSheet","View","AppContainer","state","inspector","mainKey","_subscription","rootTag","props","__DEV__","global","__RCTProfileIsProfiling","addListener","Inspector","findNodeHandle","_mainRef","updateInspectedViewTag","setState","s","remove","yellowBox","YellowBox","innerView","styles","appContainer","ref","children","Wrapper","WrapperComponent","Component","childContextTypes","number","create","flex","install","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst EmitterSubscription = require('../vendor/emitter/EmitterSubscription');\nconst PropTypes = require('prop-types');\nconst RCTDeviceEventEmitter = require('../EventEmitter/RCTDeviceEventEmitter');\nconst React = require('react');\nconst ReactNative = require('../Renderer/shims/ReactNative');\nconst RootTagContext = require('./RootTagContext');\nconst StyleSheet = require('../StyleSheet/StyleSheet');\nconst View = require('../Components/View/View');\n\ntype Context = {\n  rootTag: number,\n};\n\ntype Props = $ReadOnly<{|\n  children?: React.Node,\n  rootTag: number,\n  WrapperComponent?: ?React.ComponentType<any>,\n|}>;\n\ntype State = {|\n  inspector: ?React.Node,\n  mainKey: number,\n|};\n\nclass AppContainer extends React.Component<Props, State> {\n  state: State = {\n    inspector: null,\n    mainKey: 1,\n  };\n  _mainRef: ?React.ElementRef<typeof View>;\n  _subscription: ?EmitterSubscription = null;\n\n  static childContextTypes:\n    | any\n    | $TEMPORARY$object<{|rootTag: React$PropType$Primitive<number>|}> = {\n    rootTag: PropTypes.number,\n  };\n\n  getChildContext(): Context {\n    return {\n      rootTag: this.props.rootTag,\n    };\n  }\n\n  componentDidMount(): void {\n    if (__DEV__) {\n      if (!global.__RCTProfileIsProfiling) {\n        this._subscription = RCTDeviceEventEmitter.addListener(\n          'toggleElementInspector',\n          () => {\n            const Inspector = require('../Inspector/Inspector');\n            const inspector = this.state.inspector ? null : (\n              <Inspector\n                inspectedViewTag={ReactNative.findNodeHandle(this._mainRef)}\n                onRequestRerenderApp={updateInspectedViewTag => {\n                  this.setState(\n                    s => ({mainKey: s.mainKey + 1}),\n                    () =>\n                      updateInspectedViewTag(\n                        ReactNative.findNodeHandle(this._mainRef),\n                      ),\n                  );\n                }}\n              />\n            );\n            this.setState({inspector});\n          },\n        );\n      }\n    }\n  }\n\n  componentWillUnmount(): void {\n    if (this._subscription != null) {\n      this._subscription.remove();\n    }\n  }\n\n  render(): React.Node {\n    let yellowBox = null;\n    if (__DEV__) {\n      if (!global.__RCTProfileIsProfiling) {\n        const YellowBox = require('../YellowBox/YellowBox');\n        yellowBox = <YellowBox />;\n      }\n    }\n\n    let innerView = (\n      <View\n        collapsable={!this.state.inspector}\n        key={this.state.mainKey}\n        pointerEvents=\"box-none\"\n        style={styles.appContainer}\n        ref={ref => {\n          this._mainRef = ref;\n        }}>\n        {this.props.children}\n      </View>\n    );\n\n    const Wrapper = this.props.WrapperComponent;\n    if (Wrapper != null) {\n      innerView = <Wrapper>{innerView}</Wrapper>;\n    }\n    return (\n      <RootTagContext.Provider value={this.props.rootTag}>\n        <View style={styles.appContainer} pointerEvents=\"box-none\">\n          {innerView}\n          {yellowBox}\n          {this.state.inspector}\n        </View>\n      </RootTagContext.Provider>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n  },\n});\n\nif (__DEV__) {\n  if (!global.__RCTProfileIsProfiling) {\n    const YellowBox = require('../YellowBox/YellowBox');\n    YellowBox.install();\n  }\n}\n\nmodule.exports = AppContainer;\n"]}